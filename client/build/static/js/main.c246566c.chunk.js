(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{126:function(e,t,c){},167:function(e,t,c){},210:function(e,t,c){},211:function(e,t,c){},212:function(e,t,c){},213:function(e,t,c){},214:function(e,t,c){},215:function(e,t,c){},216:function(e,t,c){},217:function(e,t,c){},218:function(e,t,c){},219:function(e,t,c){},224:function(e,t,c){"use strict";c.r(t);var a=c(0),s=c.n(a),n=c(58),r=c.n(n),o=(c(167),c(262)),i=c(267),l=c(34),u=c(4),j=c(22),d=c(31),b=function(e,t){switch(t.type){case"LOGIN_START":return{user:null,isFetching:!0,error:!1};case"LOGIN_SUCCESS":return{user:t.payload,isFetching:!1,error:!1};case"LOGIN_FAILURE":return{user:null,isFetching:!1,error:!0};case"LOGOUT":return{user:null,isFetching:!0,error:!1};case"FOLLOW":return Object(d.a)(Object(d.a)({},e),{},{user:Object(d.a)(Object(d.a)({},e.user),{},{followings:[].concat(Object(j.a)(e.user.followings),[t.payload])})});case"UNFOLLOW":return Object(d.a)(Object(d.a)({},e),{},{user:Object(d.a)(Object(d.a)({},e.user),{},{followings:e.user.followings.filter((function(e){return e!==t.payload}))})});default:return e}},p=c(1),O={user:JSON.parse(localStorage.getItem("user"))||null,isFetching:!1,error:!1},h=Object(a.createContext)(O),m=function(e){var t=e.children,c=Object(a.useReducer)(b,O),s=Object(u.a)(c,2),n=s[0],r=s[1];return Object(a.useEffect)((function(){localStorage.setItem("user",JSON.stringify(n.user))}),[n.user]),Object(p.jsx)(h.Provider,{value:{user:n.user,isFetching:n.isFetching,error:n.error,dispatch:r},children:t})},x=c(11),f=c.n(x),g=c(19),v=c(18),N=c.n(v),I=function(){var e=Object(g.a)(f.a.mark((function e(t,c){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c({type:"LOGIN_START"}),e.prev=1,e.next=4,N.a.post("http://localhost:8800/api/auth/login",t);case 4:a=e.sent,c({type:"LOGIN_SUCCESS",payload:a.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),c({type:"LOGIN_FAILURE",payload:e.t0});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,c){return e.apply(this,arguments)}}();function y(){var e=Object(a.useContext)(h).user,t="http://localhost:8800/images/",c=Object(a.useContext)(h).dispatch;return Object(p.jsxs)("div",{className:"topbarContainer",children:[Object(p.jsx)("div",{className:"topbarLeft",children:Object(p.jsxs)(l.b,{to:"/",style:{textDecoration:"none"},children:[Object(p.jsx)("span",{className:"logo",children:"FFL"}),Object(p.jsx)(o.a,{className:"logoFFL"})]})}),Object(p.jsx)("div",{className:"topbarCenter"}),Object(p.jsxs)("div",{className:"topbarRight",children:[Object(p.jsx)("div",{className:"topbarIcons",children:Object(p.jsx)("div",{className:"topbarIconsItem",children:Object(p.jsx)(l.b,{to:"/messenger",children:Object(p.jsx)(i.a,{})})})}),Object(p.jsx)(l.b,{to:"/profile/".concat(e.username),children:Object(p.jsx)("img",{src:e.profilePicture?t+e.profilePicture:t+"person.png",alt:"",className:"topbarImage"})}),Object(p.jsx)("form",{className:"logout",onSubmit:function(e){e.preventDefault(),I({email:null,password:null},c)},children:Object(p.jsx)("button",{className:"topbarLogOut",children:"logout"})})]})]})}var S=c(271),k=c(272),w=(c(126),c(90)),C=c(285),E=c(281),L=c(284),T=c(283),R=c(279),U=c(278),A=c(286),F=c(151),B=c(139),_=c.n(B),D=c(71),P=c.n(D),M=c(63),H={position:"relative",top:"50%",left:"50%",overflow:"scroll",height:"30%",transform:"translate(-50%, -50%)",width:"50%",bgcolor:"background.paper",boxShadow:24,p:4},J={position:"relative",top:"50%",left:"50%",overflow:"scroll",height:"60%",transform:"translate(-50%, -50%)",width:"60%",bgcolor:"background.paper",boxShadow:24,p:4};function V(e){var t=e.post,c=Object(a.useState)(t.likes.length),s=Object(u.a)(c,2),n=s[0],r=s[1],o=Object(a.useState)(!1),i=Object(u.a)(o,2),j=i[0],b=i[1],O=Object(a.useState)({}),m=Object(u.a)(O,2),x=m[0],v=m[1],I=Object(a.useState)(!1),y=Object(u.a)(I,2),B=y[0],D=y[1],V=Object(a.useState)(!1),W=Object(u.a)(V,2),Y=W[0],G=W[1],z="http://localhost:8800/images/",q=Object(a.useContext)(h).user,Z=Object(a.useState)(""),K=Object(u.a)(Z,2),X=K[0],Q=K[1],$=Object(a.useState)(null),ee=Object(u.a)($,2),te=ee[0],ce=ee[1],ae=Boolean(te),se=Object(a.useState)(!1),ne=Object(u.a)(se,2),re=ne[0],oe=ne[1],ie=Object(a.useState)([]),le=Object(u.a)(ie,2),ue=le[0],je=le[1],de=Object(a.useRef)(),be=Object(a.useState)(!1),pe=Object(u.a)(be,2),Oe=pe[0],he=pe[1],me=Object(a.useState)(null),xe=Object(u.a)(me,2),fe=xe[0],ge=xe[1],ve=Object(a.useState)({width:"100vw",height:"100vh",latitude:13.65004,longitude:100.49449,zoom:16}),Ne=Object(u.a)(ve,2),Ie=Ne[0],ye=Ne[1];Object(a.useEffect)((function(){b(t.likes.includes(q._id))}),[q._id,t.likes]),Object(a.useEffect)((function(){(function(){var e=Object(g.a)(f.a.mark((function e(){var c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("http://localhost:8800/api"+"/users?userId=".concat(t.userId));case 2:c=e.sent,v(c.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t.userId]),Object(a.useEffect)((function(){console.log("post"),console.log(t),console.log(t._id),console.log(t),console.log(t.img)}),[t]);var Se=function(){try{N.a.put("http://localhost:8800/api/posts/"+t._id+"/like",{userId:q._id})}catch(e){}r(j?n-1:n+1),b(!j)},ke=function(){var e=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(q._id!==t.userId){e.next=14;break}return e.prev=1,oe(!0),e.next=5,N.a.delete("http://localhost:8800/api/posts/"+t._id);case 5:oe(!1),window.location.reload(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:e.next=15;break;case 14:alert("not your post");case 15:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),we=function(){var e=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ce();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ce=function(){var e=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(q._id!==t.userId){e.next=12;break}return e.prev=1,e.next=4,N.a.put("http://localhost:8800/api/posts/"+t._id,{desc:X});case 4:window.location.reload(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:e.next=13;break;case 12:alert("not your post");case 13:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),Ee=function(){var e=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(q._id!==t.userId){e.next=12;break}return e.prev=1,e.next=4,N.a.put("http://localhost:8800/api/posts/"+t._id,{lat:fe.lat,long:fe.long});case 4:window.location.reload(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:e.next=13;break;case 12:alert("not your post");case 13:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),Le=Object(p.jsx)(R.a,{open:Y,onClose:function(){G(!1)},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:Object(p.jsxs)(T.a,{sx:J,className:"modal",children:[Object(p.jsxs)("div",{onClick:Ee,style:{cursor:"pointer",color:"tomato"},children:[Object(p.jsx)(P.a,{}),Object(p.jsx)("span",{children:"updatePin"})]}),Object(p.jsx)("div",{className:"app",children:Object(p.jsxs)(M.b,Object(d.a)(Object(d.a)({},Ie),{},{mapboxApiAccessToken:"pk.eyJ1IjoibmV3b3ZlMTAxNjAiLCJhIjoiY2t4OG9xc3BjMWJvbTJwcXVyNTViMnVpbiJ9.2-Z9vpa0DKBFUZaeFFB3Rg",onViewportChange:function(e){return ye(e)},mapStyle:"mapbox://styles/mapbox/streets-v11",onDblClick:function(e){if(q._id===t.userId){var c=Object(u.a)(e.lngLat,2),a=c[0],s=c[1];ge({lat:s,long:a})}},children:[Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(M.a,{latitude:t.lat,longitude:t.long,offsetLeft:-20,offsetTop:-10,children:Object(p.jsx)(P.a,{style:{fontSize:2*Ie.zoom,color:"slateblue",cursor:"pointer"}})})}),fe&&Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(M.a,{latitude:fe.lat,longitude:fe.long,offsetLeft:-20,offsetTop:-10,children:Object(p.jsx)(P.a,{style:{fontSize:2*Ie.zoom,color:"tomato",cursor:"pointer"}})})})]}))})]})}),Te=Object(p.jsx)(R.a,{open:B,onClose:function(){D(!1)},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:Object(p.jsxs)(T.a,{sx:H,className:"modal",children:[Object(p.jsx)(U.a,{id:"outlined-multiline-flexible",label:"Edit",multiline:!0,maxRows:4,style:{width:"900px",height:"50px"},value:X,onChange:function(e){Q(e.target.value)}}),Object(p.jsx)(L.a,{className:"submitBt",variant:"contained",onClick:function(){we()},children:"Submit"})]})}),Re=function(){var e=Object(g.a)(f.a.mark((function e(){var c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={senderId:q._id,receiverId:t.userId},e.prev=1,e.next=4,N.a.post("http://localhost:8800/api/conversations",c);case 4:window.location.reload(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),Ue=function(){var e=Object(g.a)(f.a.mark((function e(){var c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={basePost:t._id,commenter:q._id,commenterName:q.username,desc:de.current.value},e.prev=1,e.next=4,N.a.post("http://localhost:8800/api/comments",c);case 4:e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),Ae=Object(p.jsx)(R.a,{open:Oe,onClose:function(){he(!1),je([])},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:Object(p.jsx)(T.a,{sx:H,children:ue.map((function(e,t){return Object(p.jsxs)("span",{children:["Username : ",e.commenterName,Object(p.jsx)("br",{}),"comment : ",e.desc,Object(p.jsx)("p",{children:console.log(e._id)},t)]},t)}))})}),Fe=function(){var e=Object(g.a)(f.a.mark((function e(){var c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.get("http://localhost:8800/api/comments/post/"+t._id);case 3:c=e.sent,console.log("resComment"),console.log(c.data),je(c.data),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return Object(p.jsx)("div",{className:"post",children:Object(p.jsxs)("div",{className:"postWrapper",children:[Object(p.jsxs)("div",{className:"postTop",children:[Object(p.jsxs)("div",{className:"postTopLeft",children:[Object(p.jsx)(l.b,{to:"profile/".concat(x.username),children:Object(p.jsx)("img",{className:"postProfileImg",src:x.profilePicture?z+x.profilePicture:z+"person.png",alt:""})}),Object(p.jsx)("span",{className:"postUserName",children:x.username}),Object(p.jsx)("span",{className:"postDate",children:Object(w.a)(t.createdAt)})]}),Object(p.jsxs)("div",{className:"postTopRight",children:[Object(p.jsx)(l.b,{to:"/messenger",style:{textDecoration:"none"},children:Object(p.jsx)(S.a,{className:"directMessage",onClick:Re})}),B?Te:null,re?Object(p.jsx)(C.a,{}):null,Object(p.jsx)(A.a,{"aria-label":"more",id:"long-button","aria-controls":"long-menu","aria-expanded":ae?"true":void 0,"aria-haspopup":"true",onClick:function(e){ce(e.currentTarget)},children:Object(p.jsx)(_.a,{})}),Object(p.jsxs)(F.a,{id:"long-menu",MenuListProps:{"aria-labelledby":"long-button"},anchorEl:te,open:ae,onClose:function(){ce(null)},PaperProps:{style:{maxHeight:216,width:"20ch"}},children:[Object(p.jsx)(E.a,{onClick:function(){q._id===t.userId?D(!0):alert("not your post!!!")},children:"Edit"}),Object(p.jsx)(E.a,{onClick:function(){return ke()},children:"Delete"})]})]})]}),Object(p.jsxs)("div",{className:"postCenter",children:[Y?Le:null,Object(p.jsx)("button",{type:"submit",onClick:function(){G(!0)},children:"Open location"}),Object(p.jsx)("br",{}),Object(p.jsx)("span",{className:"postText",children:null===t||void 0===t?void 0:t.desc}),Object(p.jsx)("img",{className:"postImg",src:z+t.img,alt:""})]}),Object(p.jsxs)("div",{className:"postBottom",children:[Object(p.jsxs)("div",{className:"postBottomLeft",children:[Object(p.jsx)(k.a,{className:"likeIcon",onClick:Se,htmlColor:j?"green":"black"}),Object(p.jsxs)("span",{className:"postLikeCounter",onClick:Se,children:[n," people"]})]}),Object(p.jsxs)("div",{className:"postBottomRight",children:[Oe?Ae:null,Object(p.jsx)("input",{type:"text",id:"comment",ref:de}),Object(p.jsx)("input",{type:"submit",onClick:function(){return Ue()}}),Object(p.jsxs)("span",{className:"postCommentText",onClick:function(){return he(!0),void Fe()},children:[t.comment," comment"]})]})]})]})})}var W=c(273),Y=c(274),G=c(275),z=c(276),q=(c(210),{position:"relative",top:"50%",left:"50%",overflow:"scroll",height:"60%",transform:"translate(-50%, -50%)",width:"50%",bgcolor:"background.paper",boxShadow:24,p:4}),Z={position:"relative",top:"50%",left:"50%",height:"25%",transform:"translate(-50%, -50%)",width:"15%",bgcolor:"background.paper",boxShadow:24,p:4};function K(){var e=Object(a.useContext)(h).user,t="http://localhost:8800/images/",c=Object(a.useRef)(),s=Object(a.useState)(null),n=Object(u.a)(s,2),r=n[0],o=n[1],i=Object(a.useState)(!1),l=Object(u.a)(i,2),j=l[0],b=l[1],O=Object(a.useState)(!1),m=Object(u.a)(O,2),x=m[0],v=m[1],I=Object(a.useState)(""),y=Object(u.a)(I,2),S=y[0],k=y[1],w=Object(a.useState)(null),C=Object(u.a)(w,2),E=C[0],L=C[1],U=Object(a.useState)({width:"100vw",height:"100vh",latitude:13.650954,longitude:100.494172,zoom:15}),A=Object(u.a)(U,2),F=A[0],B=A[1],_=function(){var t=Object(g.a)(f.a.mark((function t(a){var s,n,o;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),s={userId:null,desc:null,lat:0,long:0,tag:S},null==E?(s.userId=e._id,s.desc=c.current.value):(s.userId=e._id,s.desc=c.current.value,s.lat=E.lat,s.long=E.long),!r){t.next=25;break}return n=new FormData,o=Date.now()+r.name,n.append("name",o),n.append("file",r),s.img=o,console.log(s),t.prev=10,t.next=13,N.a.post("http://localhost:8800/api/upload",n);case 13:t.next=17;break;case 15:t.prev=15,t.t0=t.catch(10);case 17:return t.prev=17,t.next=20,N.a.post("http://localhost:8800/api/posts",s);case 20:window.location.reload(),t.next=25;break;case 23:t.prev=23,t.t1=t.catch(17);case 25:case"end":return t.stop()}}),t,null,[[10,15],[17,23]])})));return function(e){return t.apply(this,arguments)}}(),D=Object(p.jsx)(R.a,{open:j,onClose:function(){b(!1)},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:Object(p.jsx)(T.a,{sx:q,className:"modal",children:Object(p.jsx)("div",{className:"app",children:Object(p.jsx)(M.b,Object(d.a)(Object(d.a)({},F),{},{mapboxApiAccessToken:"pk.eyJ1IjoibmV3b3ZlMTAxNjAiLCJhIjoiY2t4OG9xc3BjMWJvbTJwcXVyNTViMnVpbiJ9.2-Z9vpa0DKBFUZaeFFB3Rg",onViewportChange:function(e){return B(e)},mapStyle:"mapbox://styles/mapbox/streets-v11",onDblClick:function(e){var t=Object(u.a)(e.lngLat,2),c=t[0],a=t[1];L({lat:a,long:c})},children:E&&Object(p.jsx)(M.a,{latitude:E.lat,longitude:E.long,offsetLeft:-20,offsetTop:-10,children:Object(p.jsx)(P.a,{style:{fontSize:2*F.zoom,color:"slateblue",cursor:"pointer"}})})}))})})}),H=Object(p.jsx)(R.a,{open:x,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",onClose:function(){v(!1)},children:Object(p.jsx)(T.a,{sx:Z,className:"modal",children:Object(p.jsxs)("div",{children:[Object(p.jsx)("input",{type:"radio",name:"addtag",value:"APPLIANCES",id:"APPLIANCES"}),Object(p.jsx)("label",{children:" APPLIANCES"}),Object(p.jsx)("br",{}),Object(p.jsx)("input",{type:"radio",name:"addtag",value:"CLOTHES",id:"CLOTHES"}),Object(p.jsx)("label",{children:" CLOTHES"}),Object(p.jsx)("br",{}),Object(p.jsx)("input",{type:"radio",name:"addtag",value:"FURNITURES",id:"FURNITURES"}),Object(p.jsx)("label",{children:" FURNITURES"}),Object(p.jsx)("br",{}),Object(p.jsx)("input",{type:"radio",name:"addtag",value:"MEDICAL",id:"MEDICAL"}),Object(p.jsx)("label",{children:" MEDICAL"}),Object(p.jsx)("br",{}),Object(p.jsx)("input",{type:"radio",name:"addtag",value:"STUDY",id:"STUDY"}),Object(p.jsx)("label",{children:" STUDY"}),Object(p.jsx)("br",{}),Object(p.jsx)("input",{type:"radio",name:"addtag",value:"OTHERS",id:"OTHERS"}),Object(p.jsx)("label",{children:" OTHERS"}),Object(p.jsx)("br",{}),Object(p.jsx)("input",{type:"submit",value:"Submit",onClick:function(){return function(){var e=document.getElementById("APPLIANCES"),t=document.getElementById("CLOTHES"),c=document.getElementById("FURNITURES"),a=document.getElementById("STUDY"),s=document.getElementById("MEDICAL"),n=document.getElementById("OTHERS");!0===e.checked&&k("APPLIANCES"),!0===t.checked&&k("CLOTHES"),!0===c.checked&&k("FURNITURES"),!0===a.checked&&k("STUDY"),!0===s.checked&&k("MEDICAL"),!0===n.checked&&k("OTHERS"),console.log(S)}()}})]})})});return Object(p.jsx)("div",{className:"share",children:Object(p.jsxs)("div",{className:"shareWrapper",children:[Object(p.jsxs)("div",{className:"shareTop",children:[Object(p.jsx)("img",{className:"shareProfileImg",src:e.profilePicture?t+e.profilePicture:t+"person.png",alt:""}),Object(p.jsx)("input",{placeholder:"Input your status "+e.username+" ? ",className:"shareInput",ref:c})]}),Object(p.jsx)("hr",{className:"shareHr"}),r&&Object(p.jsxs)("div",{className:"shareImgContainer",children:[Object(p.jsx)("img",{src:URL.createObjectURL(r),alt:"",className:"shareImg"}),Object(p.jsx)(W.a,{className:"shareCancelImg",onClick:function(){return o(null)}})]}),Object(p.jsxs)("form",{className:"shareBottom",onSubmit:_,children:[Object(p.jsxs)("div",{className:"shareOptions",children:[Object(p.jsxs)("label",{htmlFor:"file",className:"shareOption",children:[Object(p.jsx)(Y.a,{htmlColor:"tomato",className:"shareIcon"}),Object(p.jsx)("span",{className:"shareOptionText",children:"Photos/Videos"}),Object(p.jsx)("input",{style:{display:"none"},type:"file",id:"file",accept:".png,.jpeg,.jpg",onChange:function(e){return o(e.target.files[0])}})]}),x?H:null,Object(p.jsxs)("div",{className:"shareOption",onClick:function(){v(!0)},children:[Object(p.jsx)(G.a,{htmlColor:"blue",className:"shareIcon"}),Object(p.jsx)("span",{className:"shareOptionText",children:"Tag"})]}),Object(p.jsxs)("div",{children:[j?D:null,Object(p.jsxs)("div",{className:"shareOption",onClick:function(){b(!0)},children:[Object(p.jsx)(z.a,{htmlColor:"green",className:"shareIcon"}),Object(p.jsx)("span",{className:"shareOptionText",children:"Location"})]})]})]}),Object(p.jsx)("button",{className:"shareBotton",type:"submit",children:" Share "})]})]})})}c(211);var X=c(277),Q=c(140),$=c.n(Q),ee=c(141),te=c.n(ee),ce=c(142),ae=c.n(ce),se=c(143),ne=c.n(se),re=c(144),oe=c.n(re),ie=c(145),le=c.n(ie);function ue(e){var t=e.username,c=Object(a.useState)([]),s=Object(u.a)(c,2),n=s[0],r=s[1],o=Object(a.useContext)(h).user,i=Object(a.useRef)(),l=Object(a.useState)(""),j=Object(u.a)(l,2),d=j[0],b=j[1],O=Object(a.useState)(""),m=Object(u.a)(O,2),x=m[0],v=m[1],I=function(){var e=Object(g.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(i.current.value),e.prev=1,e.next=4,N.a.get("http://localhost:8800/api/posts/feeds/search/"+d);case 4:t=e.sent,console.log("success"),console.log(t),r(t.data),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(g.a)(f.a.mark((function e(){var t,c,a,s,n,o,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.getElementById("1"),c=document.getElementById("2"),a=document.getElementById("3"),s=document.getElementById("4"),n=document.getElementById("5"),o=document.getElementById("6"),!0===t.checked&&v("APPLIANCES"),!0===c.checked&&v("CLOTHES"),!0===a.checked&&v("FURNITURES"),!0===n.checked&&v("STUDY"),!0===s.checked&&v("MEDICAL"),!0===o.checked&&v("OTHERS"),console.log(x),e.prev=13,e.next=16,N.a.get("http://localhost:8800/api/posts/feeds/tag/"+x);case 16:i=e.sent,console.log("filterInput"),console.log(x),r(i.data),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(13),console.log(e.t0);case 25:case"end":return e.stop()}}),e,null,[[13,22]])})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){(function(){var e=Object(g.a)(f.a.mark((function e(){var c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,N.a.get("http://localhost:8800/api/posts/profile/"+t);case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,N.a.get("http://localhost:8800/api/posts/timeline/"+o._id);case 8:e.t0=e.sent;case 9:c=e.t0,r(c.data.sort((function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)})));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t,o._id]),Object(p.jsxs)("div",{className:"feed",children:[Object(p.jsxs)("div",{className:"sidebar",children:[Object(p.jsx)("ul",{className:"searchbytags",children:"Search by Tags"}),Object(p.jsx)("br",{}),Object(p.jsx)("hr",{}),Object(p.jsx)("br",{}),Object(p.jsxs)("div",{className:"sidebarList",onClick:y,children:[Object(p.jsxs)("ul",{children:[Object(p.jsxs)("li",{className:"sidebarListItem",children:[Object(p.jsx)($.a,{className:"sidebarIcon"}),Object(p.jsx)("input",{type:"radio",name:"tag",value:"APPLIANCES",id:"1"}),Object(p.jsx)("span",{className:"sidebarlistItemText",children:" APPLIANCES"})]}),Object(p.jsx)("br",{}),Object(p.jsxs)("li",{className:"sidebarListItem",children:[Object(p.jsx)(te.a,{className:"sidebarIcon"}),Object(p.jsx)("input",{type:"radio",name:"tag",value:"CLOTHES",id:"2"}),Object(p.jsx)("span",{className:"sidebarlistItemText",children:" CLOTHES"})]}),Object(p.jsx)("br",{}),Object(p.jsxs)("li",{className:"sidebarListItem",children:[Object(p.jsx)(ae.a,{className:"sidebarIcon",children:" "}),Object(p.jsx)("input",{type:"radio",name:"tag",value:"FURNITURES",id:"3"}),Object(p.jsx)("span",{className:"sidebarlistItemText",children:" FURNITURES"})]}),Object(p.jsx)("br",{}),Object(p.jsxs)("li",{className:"sidebarListItem",children:[Object(p.jsx)(ne.a,{className:"sidebarIcon"}),Object(p.jsx)("input",{type:"radio",name:"tag",value:"MEDICAL",id:"4"}),Object(p.jsx)("span",{className:"sidebarlistItemText",children:" MEDICAL"})]}),Object(p.jsx)("br",{}),Object(p.jsxs)("li",{className:"sidebarListItem",children:[Object(p.jsx)(oe.a,{className:"sidebarIcon"}),Object(p.jsx)("input",{type:"radio",name:"tag",value:"STUDY",id:"5"}),Object(p.jsx)("span",{className:"sidebarlistItemText",children:" STUDY"})]}),Object(p.jsx)("br",{}),Object(p.jsxs)("li",{className:"sidebarListItem",children:[Object(p.jsx)(le.a,{className:"sidebarIcon"}),Object(p.jsx)("input",{type:"radio",name:"tag",value:"OTHERS",id:"6"}),Object(p.jsx)("span",{className:"sidebarlistItemText",children:" OTHERS"})]})]}),Object(p.jsx)("br",{}),Object(p.jsx)("br",{}),Object(p.jsx)("hr",{})]})]}),Object(p.jsxs)("div",{className:"feedWrapper",children:[Object(p.jsxs)("div",{className:"searchbar",children:[Object(p.jsx)(X.a,{style:{cursor:"pointer"},className:"searchIcon",onClick:I}),Object(p.jsx)("input",{placeholder:" Search !",className:"searchInput",ref:i,style:{backgroundColor:"rgb(202, 196, 196)"}})]}),(!t||t===o.username)&&Object(p.jsx)(K,{}),n.map((function(e){return Object(p.jsx)(V,{post:e},e._id)}))]})]})}c(212);function je(){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(y,{}),Object(p.jsx)(ue,{})]})}c(213);function de(){var e=Object(a.useRef)(),t=Object(a.useRef)(),c=Object(a.useContext)(h),s=c.isFetching,n=c.dispatch,r=c.error;return Object(p.jsx)("div",{className:"login",children:Object(p.jsxs)("div",{className:"loginWrapper",children:[Object(p.jsxs)("div",{className:"loginLeft",children:[Object(p.jsx)("h3",{className:"loginLogo",children:"FFL"}),Object(p.jsx)("span",{className:"loginDesc",children:"DONATION"})]}),Object(p.jsx)("div",{className:"loginRight",children:Object(p.jsxs)("form",{className:"loginBox",onSubmit:function(c){c.preventDefault(),r?(alert("Wrong password"),console.log(r)):I({email:e.current.value,password:t.current.value},n)},children:[Object(p.jsx)("input",{placeholder:"Email",type:"email",required:!0,className:"loginInput",ref:e}),Object(p.jsx)("input",{placeholder:"password",type:"password",minLength:"6",required:!0,className:"loginInput",ref:t}),Object(p.jsx)("button",{className:"loginButton",children:s?"loading":"Login"}),Object(p.jsx)(l.b,{to:"/register",children:Object(p.jsx)("button",{className:"loginRegisterButton",children:"Create your Account"})}),Object(p.jsx)("span",{className:"forgot",children:"Forgot password?"})]})})]})})}c(214);var be=c(20);function pe(){var e=Object(a.useState)({}),t=Object(u.a)(e,2),c=(t[0],t[1]),s=Object(be.h)().username;return Object(a.useEffect)((function(){(function(){var e=Object(g.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("http://localhost:8800/api"+"/users?username=".concat(s));case 2:t=e.sent,c(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[s]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(y,{}),Object(p.jsx)("div",{className:"profile",children:Object(p.jsx)("div",{className:"profileRight",children:Object(p.jsx)("div",{className:"profileRightBottom",children:Object(p.jsx)(ue,{username:s})})})})]})}c(215);function Oe(){var e=Object(a.useRef)(),t=Object(a.useRef)(),c=Object(a.useRef)(),s=Object(a.useRef)(),n=Object(be.g)(),r=function(){var a=Object(g.a)(f.a.mark((function a(r){var o;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r.preventDefault(),null!=e.current.value.trim()&&""!==e.current.value.trim()){a.next=6;break}e.current.setCustomValidity("Do not have space"),console.log("error"),a.next=21;break;case 6:if(s.current.value===c.current.value){a.next=10;break}s.current.setCustomValidity("Passwords don't match!"),a.next=21;break;case 10:return o={username:e.current.value,email:t.current.value,password:c.current.value},a.prev=11,a.next=14,N.a.post("http://localhost:8800/api/auth/register",o).then((function(e){console.log(e)}));case 14:n.push("/login"),a.next=21;break;case 17:a.prev=17,a.t0=a.catch(11),console.log(a.t0.message),t.current.setCustomValidity(a.t0.message);case 21:case"end":return a.stop()}}),a,null,[[11,17]])})));return function(e){return a.apply(this,arguments)}}();return Object(p.jsx)("div",{className:"login",children:Object(p.jsxs)("div",{className:"loginWrapper",children:[Object(p.jsxs)("div",{className:"loginLeft",children:[Object(p.jsx)("h3",{className:"loginLogo",children:"FFL"}),Object(p.jsx)("span",{className:"loginDesc",children:"DONATION"})]}),Object(p.jsx)("div",{className:"loginRight",children:Object(p.jsxs)("form",{className:"registerBox",onSubmit:r,children:[Object(p.jsx)("input",{placeholder:"Username",required:!0,ref:e,className:"registerInput"}),Object(p.jsx)("input",{placeholder:"Email",required:!0,ref:t,type:"email",className:"registerInput"}),Object(p.jsx)("input",{placeholder:"Password",required:!0,ref:c,minLength:"6",type:"password",className:"registerInput"}),Object(p.jsx)("input",{placeholder:"Comfirm Password",required:!0,ref:s,minLength:"6",type:"password",className:"registerInput"}),Object(p.jsx)("button",{className:"submitSignUp",type:"submit",children:"Sign up"}),Object(p.jsx)(l.b,{to:"/login",children:Object(p.jsx)("button",{className:"loginRegisterButton",children:"Back to Login"})})]})})]})})}c(216),c(217);function he(e){var t=e.conversation,c=e.currentUser,s=Object(a.useState)(null),n=Object(u.a)(s,2),r=n[0],o=n[1],i="http://localhost:8800/images/";return Object(a.useEffect)((function(){var e=t.members.find((function(e){return e!==c._id}));(function(){var t=Object(g.a)(f.a.mark((function t(){var c;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,N()("http://localhost:8800/api/users?userId="+e);case 3:c=t.sent,o(c.data),console.log(c),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}})()()}),[c,t]),Object(p.jsxs)("div",{className:"conversation",children:[Object(p.jsx)("img",{className:"conversationImg",src:(null===r||void 0===r?void 0:r.profilePicture)?i+r.profilePicture:i+"person.png",alt:""}),Object(p.jsx)("span",{className:"conversationName",children:null===r||void 0===r?void 0:r.username})]})}c(218);function me(e){var t=e.message,c=e.own;return Object(p.jsxs)("div",{className:c?"message own":"message",children:[Object(p.jsxs)("div",{className:"messageTop",children:[Object(p.jsx)("img",{className:"messageImg",src:"http://localhost:8800/images/person.png",alt:""}),Object(p.jsx)("p",{className:"messageText",children:t.text})]}),Object(p.jsx)("div",{className:"messageBottom",children:Object(w.a)(t.createdAt)})]})}c(219);function xe(e){var t=e.onlineUsers,c=e.currentId,s=e.setCurrentChat,n=Object(a.useState)([]),r=Object(u.a)(n,2),o=r[0],i=r[1],l=Object(a.useState)([]),j=Object(u.a)(l,2),d=j[0],b=j[1];Object(a.useEffect)((function(){(function(){var e=Object(g.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("http://localhost:8800/api/users/friend"+c);case 2:t=e.sent,i(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[c]),Object(a.useEffect)((function(){b(o.filter((function(e){return t.includes(e._id)})))}),[o,t]);var O=function(){var e=Object(g.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.get("http://localhost:8800/api"+"/users/find/".concat(c,"/").concat(t._id));case 3:a=e.sent,s(a.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsx)("div",{className:"chatOnline",children:d.map((function(e){return Object(p.jsxs)("div",{className:"chatOnlineFriend",onClick:function(){return O(e)},children:[Object(p.jsxs)("div",{className:"chatOnlineImgContainer",children:[Object(p.jsx)("img",{className:"chatOnlineImg",src:(null===e||void 0===e?void 0:e.profilePicture)?"http://localhost:8800/images/"+e.profilePicture:"blank-profile-picture.png",alt:""}),Object(p.jsx)("div",{className:"chatOnlineBadge"})]}),Object(p.jsx)("span",{className:"chatOnlineName",children:null===e||void 0===e?void 0:e.username})]})}))})}var fe=c(149);function ge(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),c=t[0],s=t[1],n=Object(a.useState)(null),r=Object(u.a)(n,2),o=r[0],i=r[1],l=Object(a.useState)([]),d=Object(u.a)(l,2),b=d[0],O=d[1],m=Object(a.useState)(""),x=Object(u.a)(m,2),v=x[0],I=x[1],S=Object(a.useState)(null),k=Object(u.a)(S,2),w=k[0],C=k[1],E=Object(a.useState)([]),L=Object(u.a)(E,2),T=L[0],R=L[1],U=Object(a.useRef)(),A=Object(a.useContext)(h).user,F=Object(a.useRef)();Object(a.useEffect)((function(){U.current=Object(fe.a)("ws://localhost:8900"),U.current.on("getMessage",(function(e){C({sender:e.senderId,text:e.text,createdAt:Date.now()})}))}),[]),Object(a.useEffect)((function(){w&&(null===o||void 0===o?void 0:o.members.includes(w.sender))&&O((function(e){return[].concat(Object(j.a)(e),[w])}))}),[w,o]),Object(a.useEffect)((function(){U.current.emit("addUser",A._id),U.current.on("getUsers",(function(e){R(A.followings.filter((function(t){return e.some((function(e){return e.userId===t}))})))}))}),[A]),Object(a.useEffect)((function(){(function(){var e=Object(g.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.get("http://localhost:8800/api/conversations/"+A._id);case 3:t=e.sent,s(t.data),console.log(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[A._id]),Object(a.useEffect)((function(){(function(){var e=Object(g.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.get("http://localhost:8800/api/messages/"+(null===o||void 0===o?void 0:o._id));case 3:t=e.sent,O(t.data),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[o]);var B=function(){var e=Object(g.a)(f.a.mark((function e(t){var c,a,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),c={sender:A._id,text:v,conversationId:o._id},a=o.members.find((function(e){return e!==A._id})),U.current.emit("sendMessage",{senderId:A.id,receiverId:a,text:v}),e.prev=4,e.next=7,N.a.post("http://localhost:8800/api/messages",c);case 7:s=e.sent,O([].concat(Object(j.a)(b),[s.data])),I(""),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(y,{}),Object(p.jsxs)("div",{className:"messenger",children:[Object(p.jsx)("div",{className:"chatMenu",children:Object(p.jsxs)("div",{className:"chatMenuWrapper",children:[Object(p.jsx)("input",{placeholder:"Search Users",className:"chatMenuInput"}),c.map((function(e){return Object(p.jsx)("div",{className:"",onClick:function(){return i(e)},children:Object(p.jsx)(he,{conversation:e,currentUser:A})})}))]})}),Object(p.jsx)("div",{className:"chatBox",children:Object(p.jsx)("div",{className:"chatBoxWrapper",children:o?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"chatBoxTop",children:b.map((function(e){return Object(p.jsx)("div",{ref:F,children:Object(p.jsx)(me,{message:e,own:e.sender===A._id})})}))}),Object(p.jsxs)("div",{className:"chatBoxBottom",children:[Object(p.jsx)("textarea",{className:"chatMessageInput",placeholder:"Write something here",onChange:function(e){return I(e.target.value)},value:v}),Object(p.jsx)("button",{className:"chatSubmitButton",onClick:B,children:"Send"})]})]}):Object(p.jsx)("span",{className:"noConversationText",children:" Open Conversation to Start Chat"})})}),Object(p.jsx)("div",{className:"chatOnline",children:Object(p.jsx)("div",{className:"chatOnlineWrapper",children:Object(p.jsx)(xe,{onlineUsers:T,currentId:A._id,setCurrentChat:i})})})]})]})}function ve(){var e=Object(be.h)(),t=Object(a.useState)({}),c=Object(u.a)(t,2),s=c[0],n=c[1],r=Object(a.useState)(!0),o=Object(u.a)(r,2),i=(o[0],o[1]);return Object(a.useEffect)((function(){N.a.get("http://localhost:8800/api/posts/"+e).then((function(e){n(e.data)})),function(){var t=Object(g.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i(!0);try{N.a.get("http://localhost:8800/api/comments/post/"+e).then((function(e){}))}catch(c){}setTimeout((function(){i(!1)}),100);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}),[]),Object(p.jsx)("div",{children:Object(p.jsx)(V,{post:s})})}var Ne=function(){var e=Object(a.useContext)(h).user;return Object(p.jsx)(l.a,{children:Object(p.jsxs)(be.d,{children:[Object(p.jsx)(be.b,{exact:!0,path:"/",children:e?Object(p.jsx)(je,{}):Object(p.jsx)(Oe,{})}),Object(p.jsx)(be.b,{path:"/login",children:e?Object(p.jsx)(be.a,{to:"/"}):Object(p.jsx)(de,{user:e})}),Object(p.jsx)(be.b,{path:"/register",children:e?Object(p.jsx)(be.a,{to:"/"}):Object(p.jsx)(Oe,{})}),Object(p.jsx)(be.b,{path:"/messenger",children:e?Object(p.jsx)(ge,{}):Object(p.jsx)(be.a,{to:"/"})}),Object(p.jsx)(be.b,{path:"/profile/:username",children:Object(p.jsx)(pe,{})}),Object(p.jsx)(be.b,{path:"/comments/:postid",children:Object(p.jsx)(ve,{})})]})})};r.a.render(Object(p.jsx)(s.a.StrictMode,{children:Object(p.jsx)(m,{children:Object(p.jsx)(Ne,{})})}),document.getElementById("root"))}},[[224,1,2]]]);
//# sourceMappingURL=main.c246566c.chunk.js.map