{"version":3,"sources":["context/AuthReducer.js","context/AuthContext.js","apiCalls.js","components/topbar/Topbar.jsx","components/post/Post.jsx","components/share/Share.jsx","components/feed/Feed.jsx","pages/home/Home.jsx","pages/login/Login.jsx","pages/profile/Profile.jsx","pages/register/Register.jsx","components/conversations/Conversation.jsx","components/message/Message.jsx","components/chatOnline/ChatOnline.jsx","pages/messenger/Messenger.jsx","pages/comment/Comments.jsx","App.js","index.js"],"names":["AuthReducer","state","action","type","user","isFetching","error","payload","followings","filter","following","INITIAL_STATE","JSON","parse","localStorage","getItem","AuthContext","createContext","AuthContextProvider","children","useReducer","dispatch","useEffect","setItem","stringify","Provider","value","loginCall","userCredential","a","axios","post","process","res","data","Topbar","useContext","PF","className","to","style","textDecoration","AutoStories","Chat","username","src","profilePicture","alt","onSubmit","e","preventDefault","email","password","styleModal","position","top","left","overflow","height","transform","width","bgcolor","boxShadow","p","styleMapModal","Post","useState","likes","length","like","setLike","isLiked","setIsLiked","setUser","openModalEdit","setOpenModalEdit","openModalMap","setOpenModalMap","currentUser","setValue","anchorEl","setAnchorEl","open","Boolean","loading","setLoading","comments","setComments","desc","useRef","openCommentModal","setOpenCommentModal","newPlace","setNewPlace","latitude","longitude","zoom","viewport","setViewport","includes","_id","get","userId","fetchUser","console","log","img","likeHandler","put","err","deletePost","delete","window","location","reload","alert","submitEdit","updatePost","updatePin","lat","long","modalMap","Modal","onClose","aria-labelledby","aria-describedby","Box","sx","onClick","cursor","color","mapboxApiAccessToken","onViewportChange","nextViewport","mapStyle","onDblClick","lngLat","offsetLeft","offsetTop","fontSize","modalEdit","TextField","id","label","multiline","maxRows","onChange","event","target","Button","variant","sendMessageHandler","newConversation","senderId","receiverId","createComment","newComment","basePost","commenter","commenterName","current","commentModal","map","index","getAllComment","format","createdAt","Message","CircularProgress","IconButton","aria-label","aria-controls","aria-expanded","undefined","aria-haspopup","currentTarget","Menu","MenuListProps","PaperProps","maxHeight","ITEM_HEIGHT","MenuItem","ThumbUp","htmlColor","ref","comment","styleModalTags","Share","file","setFile","openModalTags","setOpenModalTags","tag","setTag","submitHandler","newPost","FormData","fileName","Date","now","name","append","modalTags","APPLIANCES","document","getElementById","CLOTHES","FURNITURES","STUDY","MEDICAL","OTHERS","checked","handleSubmitTags","placeholder","URL","createObjectURL","Cancel","htmlFor","PermMedia","display","accept","files","Label","Room","Feed","posts","setPost","search","searchInput","setSearchInput","filterInput","setFilterInput","handleSearch","resSearch","handleFilter","sort","p1","p2","fetchPosts","Search","backgroundColor","Home","Login","required","minLength","Profile","useParams","Register","passwordAgain","history","useHistory","handleClick","trim","setCustomValidity","then","push","message","Conversation","conversation","friendId","members","find","m","getUser","own","text","ChatOnline","onlineUsers","currentId","setCurrentChat","friends","setFriends","onlineFriends","setOnlineFriends","getFriends","f","o","Messenger","conversations","setConversations","currentChat","messages","setMessages","newMessage","setNewMessage","arrivalMessage","setArrivalMessage","setOnlineUsers","socket","scrollRef","io","on","sender","prev","emit","users","some","u","getConversations","getMessages","handleSubmit","conversationId","member","c","Comments","postid","setTimeout","fetchData","App","exact","path","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.c246566c.chunk.js","sourcesContent":["const AuthReducer = (state, action) => {\n  switch (action.type) {\n    case \"LOGIN_START\":\n      return {\n        user: null,\n        isFetching: true,\n        error: false,\n      };\n    case \"LOGIN_SUCCESS\":\n      return {\n        user: action.payload,\n        isFetching: false,\n        error: false,\n      };\n    case \"LOGIN_FAILURE\":\n      return {\n        user: null,\n        isFetching: false,\n        error: true,\n      };\n    case \"LOGOUT\":\n      return {\n        user: null,\n        isFetching: true,\n        error: false ,\n      }\n    case \"FOLLOW\":\n      return {\n        ...state,\n        user: {\n          ...state.user,\n          followings: [...state.user.followings, action.payload],\n        },\n      };\n    case \"UNFOLLOW\":\n      return {\n        ...state,\n        user: {\n          ...state.user,\n          followings: state.user.followings.filter(\n            (following) => following !== action.payload\n          ),\n        },\n      };\n    default:\n      return state;\n  }\n};\n\nexport default AuthReducer;","import { createContext, useEffect, useReducer } from \"react\";\nimport AuthReducer from \"./AuthReducer\";\n\nconst INITIAL_STATE = {\n  user:JSON.parse(localStorage.getItem(\"user\")) || null,\n  isFetching: false,\n  error: false,\n};\n\n\nexport const AuthContext = createContext(INITIAL_STATE);\n\nexport const AuthContextProvider = ({ children }) => {\n  const [state, dispatch] = useReducer(AuthReducer, INITIAL_STATE);\n  \n  useEffect(()=>{\n    localStorage.setItem(\"user\", JSON.stringify(state.user))\n  },[state.user])\n  \n  return (\n    <AuthContext.Provider\n      value={{\n        user: state.user,\n        isFetching: state.isFetching,\n        error: state.error,\n        dispatch,\n      }}\n    >\n      {children}\n    </AuthContext.Provider>\n  );\n};","import axios from \"axios\";\r\n\r\nexport const loginCall = async (userCredential, dispatch) => {\r\n  dispatch({ type: \"LOGIN_START\" });\r\n  try {\r\n    const res = await axios.post(process.env.REACT_APP_BACKEND_URL + \"/auth/login\", userCredential);\r\n    dispatch({ type: \"LOGIN_SUCCESS\", payload: res.data });\r\n  \r\n  } catch (err) {\r\n    dispatch({ type: \"LOGIN_FAILURE\", payload: err });\r\n   \r\n  }\r\n};\r\n\r\n","import \"./topbar.css\"\r\nimport { Chat, Notifications, AutoStories } from \"@mui/icons-material\";\r\nimport {Link} from \"react-router-dom\";\r\nimport { useContext } from \"react\";\r\nimport {AuthContext} from \"../../context/AuthContext\";\r\nimport { loginCall } from \"../../apiCalls\";\r\n// import axios from \"axios\";\r\n// import { useState } from \"react\";\r\n\r\n\r\nexport default function Topbar() {\r\n\r\n    const {user} = useContext(AuthContext)\r\n    const PF = process.env.REACT_APP_PUBLIC_FOLDER;\r\n    const {dispatch} = useContext(AuthContext);\r\n    // const search = useRef();\r\n    // const [searchInput,setSearchInput] = useState();\r\n\r\n    const handleClickLogout = (e) => {\r\n        e.preventDefault();\r\n        loginCall(\r\n          { email: null, password: null },\r\n          dispatch\r\n        )\r\n      }\r\n\r\n    //   const handleSearch = () => {\r\n    //     setSearchInput(search.current.value);\r\n    //     fetchSearch();\r\n    //   };\r\n    // const fetchSearch = async () => {\r\n    //     try {\r\n    //       const res = await axios.get(\"/posts/feeds/search/\" + searchInput);\r\n    //       console.log(\"success\");\r\n    //       console.log(res)\r\n    //     } catch (err) {\r\n    //       console.log(err);\r\n    //     }\r\n    //   };\r\n    \r\n\r\n    \r\n    return (\r\n        <div className = \"topbarContainer\">\r\n            <div className=\"topbarLeft\">\r\n            <Link to=\"/\" style={{textDecoration:\"none\"}}>\r\n            <span className=\"logo\">FFL</span>\r\n            <AutoStories className=\"logoFFL\"></AutoStories>\r\n            </Link>\r\n            </div>\r\n            <div className=\"topbarCenter\">\r\n                {/* <div className=\"searchbar\" >\r\n                    <Search  onClick={handleSearch} className= \"searchIcon\"/>\r\n                    <input placeholder=\"search now!\" className=\"searchInput\" ref={search}/>\r\n                </div> */}\r\n            </div>\r\n            <div className=\"topbarRight\">\r\n            <div className=\"topbarIcons\">\r\n                {/* <div className=\"topbarIconsItem\">\r\n                <Notifications/>\r\n                <span className=\"topbarIconBadge\">1</span>\r\n                </div> */}\r\n                <div className=\"topbarIconsItem\"> \r\n                <Link to=\"/messenger\" >\r\n                <Chat/>\r\n                {/* <span className=\"topbarIconBadge\">1</span> */}\r\n                </Link>\r\n                </div>\r\n                \r\n            </div>\r\n              <Link to = {`/profile/${user.username}`}>\r\n                <img src={user.profilePicture? PF+user.profilePicture: PF+\"person.png\"} alt=\"\" className=\"topbarImage\" />\r\n              </Link>\r\n            <form className=\"logout\" onSubmit={handleClickLogout}>\r\n                <button className=\"topbarLogOut\">logout</button>\r\n            </form>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import { ThumbUp, Message } from \"@mui/icons-material\"\r\nimport \"./post.css\"\r\nimport { useContext, useEffect, useState, useRef } from \"react\"\r\nimport axios from \"axios\"\r\nimport { format } from \"timeago.js\"\r\nimport { Link } from \"react-router-dom\"\r\nimport \"./post.css\";\r\nimport { AuthContext } from \"../../context/AuthContext\";\r\nimport CircularProgress from \"@mui/material/CircularProgress\";\r\nimport MenuItem from \"@mui/material/MenuItem\";\r\nimport Button from \"@mui/material/Button\";\r\nimport Box from \"@mui/material/Box\";\r\nimport Modal from \"@mui/material/Modal\";\r\nimport TextField from \"@mui/material/TextField\";\r\nimport IconButton from \"@mui/material/IconButton\";\r\nimport Menu from \"@mui/material/Menu\";\r\nimport MoreVertIcon from \"@mui/icons-material/MoreVert\";\r\nimport AddLocationIcon from '@mui/icons-material/AddLocation';\r\nimport ReactMapGL, { Marker } from 'react-map-gl';\r\n\r\n\r\nconst ITEM_HEIGHT = 48;\r\n\r\n\r\nconst styleModal = {\r\n  position: \"relative\",\r\n  top: \"50%\",\r\n  left: \"50%\",\r\n  overflow: \"scroll\",\r\n  height: \"30%\",\r\n  transform: \"translate(-50%, -50%)\",\r\n  width: \"50%\",\r\n  bgcolor: \"background.paper\",\r\n  boxShadow: 24,\r\n  p: 4,\r\n};\r\nconst styleMapModal = {\r\n  position: \"relative\",\r\n  top: \"50%\",\r\n  left: \"50%\",\r\n  overflow: \"scroll\",\r\n  height: \"60%\",\r\n  transform: \"translate(-50%, -50%)\",\r\n  width: \"60%\",\r\n  bgcolor: \"background.paper\",\r\n  boxShadow: 24,\r\n  p: 4,\r\n};\r\n\r\nexport default function Post({ post }) {\r\n  const [like, setLike] = useState(post.likes.length);\r\n  const [isLiked, setIsLiked] = useState(false);\r\n  const [user, setUser] = useState({});\r\n  const [openModalEdit, setOpenModalEdit] = useState(false);\r\n  const [openModalMap, setOpenModalMap] = useState(false);\r\n  const PF = process.env.REACT_APP_PUBLIC_FOLDER;\r\n  const { user: currentUser } = useContext(AuthContext);\r\n  const [value, setValue] = useState(\"\");\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n  const open = Boolean(anchorEl);\r\n  const [loading, setLoading] = useState(false);\r\n  const [comments, setComments] = useState([])\r\n  const desc = useRef();\r\n  const [openCommentModal, setOpenCommentModal] = useState(false);\r\n  // const [commentStoreForDelete, setCommentStoreForDelete] = useState([]);\r\n  const [newPlace, setNewPlace] = useState(null)\r\n  const [viewport, setViewport] = useState({\r\n    width: \"100vw\",\r\n    height: \"100vh\",\r\n    latitude: 13.65004,\r\n    longitude: 100.49449,\r\n    zoom: 16\r\n  });\r\n\r\n  useEffect(() => {\r\n    setIsLiked(post.likes.includes(currentUser._id));\r\n  }, [currentUser._id, post.likes]);\r\n\r\n  useEffect(() => {\r\n    const fetchUser = async () => {\r\n      const res = await axios.get(process.env.REACT_APP_BACKEND_URL + `/users?userId=${post.userId}`);\r\n      setUser(res.data);\r\n    };\r\n    fetchUser();\r\n  }, [post.userId]);\r\n\r\n  useEffect(() => {\r\n    console.log(\"post\");\r\n    console.log(post);\r\n    console.log(post._id);\r\n    console.log(post);\r\n    console.log(post.img);\r\n  }, [post]);\r\n\r\n  const likeHandler = () => {\r\n    try {\r\n      axios.put(process.env.REACT_APP_BACKEND_URL + \"/posts/\" + post._id + \"/like\", { userId: currentUser._id });\r\n    } catch (err) { }\r\n    setLike(isLiked ? like - 1 : like + 1);\r\n    setIsLiked(!isLiked);\r\n  };\r\n\r\n  const deletePost = async () => {\r\n    if (currentUser._id === post.userId) {\r\n      try {\r\n        setLoading(true);\r\n        await axios.delete(process.env.REACT_APP_BACKEND_URL + \"/posts/\" + post._id);\r\n        setLoading(false);\r\n        window.location.reload();\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    } else {\r\n      alert(\"not your post\");\r\n    }\r\n  }\r\n\r\n  //   useEffect(() => {\r\n  //     {\r\n  //       comments.map((value, index) => {\r\n  //         return (\r\n  //           <li key={index}>\r\n  //           </li >\r\n  //     })\r\n  //     }\r\n  //   };\r\n  // }, [comments])\r\n\r\n  const handleCloseEditModal = () => {\r\n    setOpenModalEdit(false);\r\n  };\r\n\r\n  const submitEdit = async () => {\r\n    updatePost();\r\n  };\r\n\r\n  const handleClick = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n  const handleClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  const updatePost = async () => {\r\n    if (currentUser._id === post.userId) {\r\n      try {\r\n        await axios.put(process.env.REACT_APP_BACKEND_URL + \"/posts/\" + post._id, { desc: value });\r\n        window.location.reload();\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    } else {\r\n      alert(\"not your post\");\r\n    }\r\n  };\r\n\r\n  const handleChange = (event) => {\r\n    setValue(event.target.value);\r\n  };\r\n\r\n  const checkUserPost = () => {\r\n    if (currentUser._id === post.userId) {\r\n      setOpenModalEdit(true);\r\n    } else {\r\n      alert(\"not your post!!!\");\r\n    }\r\n  };\r\n\r\n  const handleCloseMapModal = () => {\r\n    setOpenModalMap(false)\r\n  }\r\n\r\n  const updatePin = async () => {\r\n    if (currentUser._id === post.userId) {\r\n      try {\r\n        await axios.put(process.env.REACT_APP_BACKEND_URL + \"/posts/\" + post._id, { lat: newPlace.lat, long: newPlace.long });\r\n        window.location.reload();\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    } else {\r\n      alert(\"not your post\");\r\n    }\r\n  };\r\n  const handleAddClick = (e) => {\r\n    if (currentUser._id === post.userId) {\r\n      const [longitude, latitude] = e.lngLat;\r\n      setNewPlace({\r\n        lat: latitude,\r\n        long: longitude\r\n      })\r\n    }\r\n  }\r\n\r\n  const modalMap = (\r\n    <Modal\r\n      open={openModalMap}\r\n      onClose={handleCloseMapModal}\r\n      aria-labelledby=\"modal-modal-title\"\r\n      aria-describedby=\"modal-modal-description\"\r\n    >\r\n      <Box sx={styleMapModal} className=\"modal\">\r\n        <div onClick={updatePin} style={{ cursor: \"pointer\", color: \"tomato\" }} >\r\n          <AddLocationIcon ></AddLocationIcon>\r\n          <span>updatePin</span>\r\n        </div>\r\n        <div className=\"app\">\r\n          <ReactMapGL\r\n            {...viewport}\r\n            mapboxApiAccessToken={process.env.REACT_APP_MAPBOX}\r\n            onViewportChange={nextViewport => setViewport(nextViewport)}\r\n            mapStyle=\"mapbox://styles/mapbox/streets-v11\"\r\n            onDblClick={handleAddClick}\r\n          >\r\n            <>\r\n              <Marker latitude={post.lat} longitude={post.long} offsetLeft={-20} offsetTop={-10}>\r\n                <AddLocationIcon style={{ fontSize: viewport.zoom * 2, color: \"slateblue\", cursor: \"pointer\" }}\r\n                />\r\n              </Marker>\r\n            </>\r\n            {newPlace &&\r\n              <>\r\n                <Marker\r\n                  latitude={newPlace.lat}\r\n                  longitude={newPlace.long}\r\n                  offsetLeft={-20}\r\n                  offsetTop={-10}\r\n                >\r\n                  <AddLocationIcon\r\n                    style={{\r\n                      fontSize: viewport.zoom * 2,\r\n                      color: \"tomato\",\r\n                      cursor: \"pointer\",\r\n                    }}\r\n                  />\r\n                </Marker>\r\n              </>\r\n            }\r\n          </ReactMapGL>\r\n        </div>\r\n      </Box>\r\n    </Modal>\r\n  );\r\n\r\n  const modalEdit = (\r\n    <Modal\r\n      open={openModalEdit}\r\n      onClose={handleCloseEditModal}\r\n      aria-labelledby=\"modal-modal-title\"\r\n      aria-describedby=\"modal-modal-description\"\r\n    >\r\n      <Box sx={styleModal} className=\"modal\">\r\n        <TextField\r\n          id=\"outlined-multiline-flexible\"\r\n          label=\"Edit\"\r\n          multiline\r\n          maxRows={4}\r\n          style={{ width: \"900px\", height: \"50px\" }}\r\n          value={value}\r\n          onChange={handleChange}\r\n        />\r\n\r\n        <Button\r\n          className=\"submitBt\"\r\n          variant=\"contained\"\r\n          onClick={() => {\r\n            submitEdit();\r\n          }}\r\n        >\r\n          Submit\r\n        </Button>\r\n      </Box>\r\n    </Modal>\r\n  );\r\n\r\n  const sendMessageHandler = async () => {\r\n    const newConversation = {\r\n      senderId: currentUser._id,\r\n      receiverId: post.userId,\r\n    };\r\n    try {\r\n      await axios.post(process.env.REACT_APP_BACKEND_URL + \"/conversations\", newConversation);\r\n      window.location.reload();\r\n    } catch (err) {\r\n      console.log(err)\r\n    }\r\n  }\r\n\r\n  const createComment = async () => {\r\n    const newComment = {\r\n        basePost: post._id,\r\n      commenter: currentUser._id,\r\n      commenterName: currentUser.username,\r\n      desc: desc.current.value,\r\n    }\r\n      try {\r\n        let res = await axios.post(process.env.REACT_APP_BACKEND_URL + \"/comments\", newComment)\r\n    } catch (err) {\r\n        console.log(err);\r\n    }\r\n  }\r\n\r\n  // const deleteComment = async () => {\r\n  //       await axios.delete(\"/comments/\" + comments._id)\r\n  // }\r\n\r\n  // const editComment = async () => {\r\n  //       await axios.edit(\"/comments/\")\r\n  //   window.location.reload();\r\n  // };\r\n  const handleCloseCommentModal = () => {\r\n        setOpenCommentModal(false);\r\n      setComments([]);\r\n  };\r\n\r\n  const setOpenComment = () => {\r\n        setOpenCommentModal(true);\r\n        getAllComment();\r\n  }\r\n    \r\n  const commentModal = (\r\n      <Modal\r\n        open={openCommentModal}\r\n        onClose={handleCloseCommentModal}\r\n        aria-labelledby=\"modal-modal-title\"\r\n        aria-describedby=\"modal-modal-description\"\r\n      >\r\n        <Box sx={styleModal}>\r\n          {comments.map((value, index) => {\r\n            return (\r\n              <span key={index}>\r\n                Username : {value.commenterName} \r\n                {/* <Button variant=\"text\" onClick={deleteComment}>DeleteComment</Button> */}\r\n                <br></br> \r\n                comment : {value.desc} \r\n                <p key={index}>{console.log(value._id)}</p>\r\n              </span>\r\n            )\r\n          })}\r\n          {/* <Button variant=\"text\" onClick={() => getAllComment()}>Text</Button> */}\r\n        </Box>\r\n      </Modal>\r\n      );\r\n  const getAllComment = async () => {\r\n    try {\r\n        let res = await axios.get(process.env.REACT_APP_BACKEND_URL + \"/comments/post/\" + post._id)\r\n      console.log(\"resComment\")\r\n      console.log(res.data)\r\n      setComments(res.data);\r\n    } catch (err) {\r\n        console.log(err)\r\n      }\r\n  };\r\n\r\n  return (\r\n    <div className=\"post\">\r\n      <div className=\"postWrapper\">\r\n        <div className=\"postTop\">\r\n          <div className=\"postTopLeft\">\r\n            <Link to={`profile/${user.username}`} >\r\n              <img className=\"postProfileImg\"\r\n                src={user.profilePicture ? PF + user.profilePicture : PF + \"person.png\"} alt=\"\" />\r\n            </Link>\r\n            <span className=\"postUserName\">\r\n              {user.username}\r\n            </span>\r\n            <span className=\"postDate\">{format(post.createdAt)}</span>\r\n          </div>\r\n          <div className=\"postTopRight\">\r\n            <Link to=\"/messenger\" style={{ textDecoration: \"none\" }}>\r\n              <Message className=\"directMessage\" onClick={sendMessageHandler}></Message>\r\n            </Link>\r\n            {openModalEdit ? modalEdit : null}\r\n            {loading ? <CircularProgress /> : null}\r\n\r\n            <IconButton\r\n              aria-label=\"more\"\r\n              id=\"long-button\"\r\n              aria-controls=\"long-menu\"\r\n              aria-expanded={open ? \"true\" : undefined}\r\n              aria-haspopup=\"true\"\r\n              onClick={handleClick}\r\n            >\r\n              <MoreVertIcon />\r\n            </IconButton>\r\n            <Menu\r\n              id=\"long-menu\"\r\n              MenuListProps={{\r\n                \"aria-labelledby\": \"long-button\",\r\n              }}\r\n              anchorEl={anchorEl}\r\n              open={open}\r\n              onClose={handleClose}\r\n              PaperProps={{\r\n                style: {\r\n                  maxHeight: ITEM_HEIGHT * 4.5,\r\n                  width: \"20ch\",\r\n                },\r\n              }}\r\n            >\r\n              <MenuItem onClick={() => checkUserPost()}>Edit</MenuItem>\r\n              <MenuItem onClick={() => deletePost()}>Delete</MenuItem>\r\n            </Menu>\r\n          </div>\r\n        </div>\r\n        <div className=\"postCenter\">\r\n          {openModalMap ? modalMap : null}\r\n          <button type=\"submit\" onClick={() => { setOpenModalMap(true) }}>Open location</button>\r\n          <br></br>\r\n          <span className=\"postText\">{post?.desc}</span>\r\n          <img className=\"postImg\" src={PF + post.img} alt=\"\" />\r\n        </div>\r\n        <div className=\"postBottom\">\r\n          <div className=\"postBottomLeft\">\r\n            <ThumbUp className=\"likeIcon\" onClick={likeHandler} htmlColor={isLiked ? \"green\" : \"black\"}></ThumbUp>\r\n            <span className=\"postLikeCounter\" onClick={likeHandler}>{like} people</span>\r\n          </div>\r\n          <div className=\"postBottomRight\">\r\n          {openCommentModal ? commentModal : null}\r\n            <input type=\"text\" id=\"comment\" ref={desc} />\r\n            <input type=\"submit\" onClick={() => createComment()} />\r\n            <span className=\"postCommentText\" onClick={() => setOpenComment()}>{post.comment} comment</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      </div>\r\n  )\r\n}\r\n","import { Cancel, Label, PermMedia, Room } from \"@mui/icons-material\"\r\nimport { useContext, useRef, useState } from \"react\"\r\nimport \"./share.css\"\r\nimport { AuthContext } from \"../../context/AuthContext\"\r\nimport axios from \"axios\"\r\nimport Box from \"@mui/material/Box\";\r\nimport Modal from \"@mui/material/Modal\";\r\nimport ReactMapGL, { Marker } from 'react-map-gl';\r\nimport AddLocationIcon from '@mui/icons-material/AddLocation';\r\n// import FormGroup from '@mui/material/FormGroup';\r\n// import FormControlLabel from '@mui/material/FormControlLabel';\r\n// import Checkbox from '@mui/material/Checkbox';\r\n\r\nconst styleModal = {\r\n  position: \"relative\",\r\n  top: \"50%\",\r\n  left: \"50%\",\r\n  overflow: \"scroll\",\r\n  height: \"60%\",\r\n  transform: \"translate(-50%, -50%)\",\r\n  width: \"50%\",\r\n  bgcolor: \"background.paper\",\r\n  boxShadow: 24,\r\n  p: 4,\r\n};\r\n\r\nconst styleModalTags = {\r\n  position: \"relative\",\r\n  top: \"50%\",\r\n  left: \"50%\",\r\n  height: \"25%\",\r\n  transform: \"translate(-50%, -50%)\",\r\n  width: \"15%\",\r\n  bgcolor: \"background.paper\",\r\n  boxShadow: 24,\r\n  p: 4,\r\n};\r\n\r\nexport default function Share() {\r\n  const { user } = useContext(AuthContext);\r\n  const PF = process.env.REACT_APP_PUBLIC_FOLDER;\r\n  const desc = useRef();\r\n  const [file, setFile] = useState(null);\r\n  const [openModalMap, setOpenModalMap] = useState(false);\r\n  const [openModalTags, setOpenModalTags] = useState(false);\r\n  // const [tags, setTags] = useState({ tag1: \"\", tag2: \"\", tag3: \"\", tag4: \"\", tag5: \"\", tag6: \"\" });\r\n  // const [tag1, setTag1] = useState(\"\");\r\n  // const [tag2, setTag2] = useState(\"\");\r\n  // const [tag3, setTag3] = useState(\"\");\r\n  // const [tag4, setTag4] = useState(\"\");\r\n  // const [tag5, setTag5] = useState(\"\");\r\n  // const [tag6, setTag6] = useState(\"\");\r\n  const [tag, setTag] = useState(\"\");\r\n\r\n\r\n  const [newPlace, setNewPlace] = useState(null)\r\n  const [viewport, setViewport] = useState({\r\n    width: \"100vw\",\r\n    height: \"100vh\",\r\n    latitude: 13.650954,\r\n    longitude: 100.494172,\r\n    zoom: 15\r\n  });\r\n\r\n  const handleAddClick = (e) => {\r\n    const [longitude, latitude] = e.lngLat;\r\n    setNewPlace({\r\n      lat: latitude,\r\n      long: longitude\r\n    })\r\n  }\r\n\r\n  const submitHandler = async (e) => {\r\n    e.preventDefault();\r\n    const newPost = { userId: null, desc: null, lat: 0, long: 0, tag: tag}\r\n    if (newPlace == null) {\r\n      newPost.userId = user._id;\r\n      newPost.desc = desc.current.value;\r\n    } else {\r\n      newPost.userId = user._id\r\n      newPost.desc = desc.current.value\r\n      newPost.lat = newPlace.lat\r\n      newPost.long = newPlace.long\r\n    }\r\n    if (file) {\r\n      const data = new FormData();\r\n      const fileName = Date.now() + file.name;\r\n      data.append(\"name\", fileName);\r\n      data.append(\"file\", file);\r\n      newPost.img = fileName;\r\n      console.log(newPost);\r\n      try {\r\n        await axios.post(process.env.REACT_APP_BACKEND_URL + \"/upload\", data);\r\n      } catch (err) { }\r\n      try {\r\n        await axios.post(process.env.REACT_APP_BACKEND_URL + \"/posts\", newPost);\r\n        window.location.reload();\r\n      } catch (err) { }\r\n    }\r\n  }\r\n\r\n  const handleCloseMapModal = () => {\r\n    setOpenModalMap(false)\r\n  }\r\n\r\n  const modalMap = (\r\n    <Modal\r\n      open={openModalMap}\r\n      onClose={handleCloseMapModal}\r\n      aria-labelledby=\"modal-modal-title\"\r\n      aria-describedby=\"modal-modal-description\"\r\n    >\r\n      <Box sx={styleModal} className=\"modal\">\r\n        <div className=\"app\">\r\n          <ReactMapGL\r\n            {...viewport}\r\n            mapboxApiAccessToken={process.env.REACT_APP_MAPBOX}\r\n            onViewportChange={nextViewport => setViewport(nextViewport)}\r\n            mapStyle=\"mapbox://styles/mapbox/streets-v11\"\r\n            onDblClick={handleAddClick}\r\n          >\r\n            {newPlace &&\r\n              <Marker latitude={newPlace.lat}\r\n                longitude={newPlace.long}\r\n                offsetLeft={-20}\r\n                offsetTop={-10}>\r\n                <AddLocationIcon style={{ fontSize: viewport.zoom * 2, color: \"slateblue\", cursor: \"pointer\" }}\r\n                />\r\n              </Marker>\r\n            }\r\n          </ReactMapGL>\r\n        </div>\r\n      </Box>\r\n    </Modal>\r\n  );\r\n\r\n  const handleCloseTagsModal = () => {\r\n    setOpenModalTags(false);\r\n    // setTags({ tag1: \"\", tag2: \"\", tag3: \"\", tag4: \"\", tag5: \"\", tag6: \"\" });\r\n  }\r\n\r\n  const handleSubmitTags =  () => {\r\n    let APPLIANCES = document.getElementById(\"APPLIANCES\");\r\n    let CLOTHES = document.getElementById(\"CLOTHES\");\r\n    let FURNITURES = document.getElementById(\"FURNITURES\");\r\n    let STUDY = document.getElementById(\"STUDY\");\r\n    let MEDICAL = document.getElementById(\"MEDICAL\");\r\n    let OTHERS = document.getElementById(\"OTHERS\");\r\n    if  (APPLIANCES.checked === true) {\r\n       setTag(\"APPLIANCES\");\r\n    } if (CLOTHES.checked === true) {\r\n       setTag(\"CLOTHES\");\r\n    } if (FURNITURES.checked === true) {\r\n       setTag(\"FURNITURES\");\r\n    } if (STUDY.checked === true) {\r\n       setTag(\"STUDY\");\r\n    } if (MEDICAL.checked === true) {\r\n       setTag(\"MEDICAL\");\r\n    } if (OTHERS.checked === true) {\r\n       setTag(\"OTHERS\");\r\n    }\r\n     console.log(tag);\r\n\r\n  }\r\n  const modalTags = (\r\n    <Modal\r\n      open={openModalTags}\r\n      aria-labelledby=\"modal-modal-title\"\r\n      aria-describedby=\"modal-modal-description\"\r\n      onClose={handleCloseTagsModal}\r\n    >\r\n      <Box sx={styleModalTags} className=\"modal\">\r\n        {/* <FormGroup onChange={handleCheckBox} >\r\n        <FormControlLabel control={<Checkbox defaultUnChecked />} label=\"APPLIANCES\" />\r\n        <FormControlLabel control={<Checkbox defaultUnChecked />} label=\"CLOTHES\" />\r\n        <FormControlLabel control={<Checkbox defaultUnChecked />} label=\"FURNITURES\" />\r\n        <FormControlLabel control={<Checkbox defaultUnChecked />} label=\"STUDY\" />\r\n        <FormControlLabel control={<Checkbox defaultUnChecked />} label=\"MEDICAL\" />\r\n        <FormControlLabel control={<Checkbox defaultUnChecked />} label=\"OTHERS\" />\r\n        </FormGroup> */}\r\n        <div>\r\n          <input type=\"radio\" name=\"addtag\" value=\"APPLIANCES\" id=\"APPLIANCES\" />\r\n          <label > APPLIANCES</label><br></br>\r\n          <input type=\"radio\" name=\"addtag\" value=\"CLOTHES\" id=\"CLOTHES\" />\r\n          <label > CLOTHES</label><br></br>\r\n          <input type=\"radio\" name=\"addtag\" value=\"FURNITURES\" id=\"FURNITURES\" />\r\n          <label > FURNITURES</label><br></br>\r\n          <input type=\"radio\" name=\"addtag\" value=\"MEDICAL\" id=\"MEDICAL\" />\r\n          <label > MEDICAL</label><br></br>\r\n          <input type=\"radio\" name=\"addtag\" value=\"STUDY\" id=\"STUDY\" />\r\n          <label > STUDY</label><br></br>\r\n          <input type=\"radio\" name=\"addtag\" value=\"OTHERS\" id=\"OTHERS\" />\r\n          <label > OTHERS</label><br></br>\r\n          <input type=\"submit\" value=\"Submit\" onClick={() => handleSubmitTags()}/>\r\n        </div>\r\n      </Box>\r\n    </Modal>\r\n  );\r\n\r\n  return (\r\n    <div className=\"share\">\r\n      <div className=\"shareWrapper\">\r\n        <div className=\"shareTop\">\r\n          <img className=\"shareProfileImg\" src={user.profilePicture ? PF + user.profilePicture : PF + \"person.png\"} alt=\"\" />\r\n          <input placeholder={\"Input your status \" + user.username + \" ? \"} className=\"shareInput\" ref={desc} />\r\n        </div>\r\n        <hr className=\"shareHr\" />\r\n        {file && (\r\n          <div className=\"shareImgContainer\">\r\n            <img src={URL.createObjectURL(file)} alt=\"\" className=\"shareImg\" />\r\n            <Cancel className=\"shareCancelImg\" onClick={() => setFile(null)} />\r\n          </div>\r\n        )}\r\n        <form className=\"shareBottom\" onSubmit={submitHandler}>\r\n          <div className=\"shareOptions\">\r\n            <label htmlFor=\"file\" className=\"shareOption\">\r\n              <PermMedia htmlColor=\"tomato\" className=\"shareIcon\" />\r\n              <span className=\"shareOptionText\">Photos/Videos</span>\r\n              <input style={{ display: \"none\" }} type=\"file\" id=\"file\" accept=\".png,.jpeg,.jpg\" onChange={(e) => setFile(e.target.files[0])}></input>\r\n            </label>\r\n\r\n\r\n            {openModalTags ? modalTags : null}\r\n            <div className=\"shareOption\" onClick={() => { setOpenModalTags(true) }}>\r\n              <Label htmlColor=\"blue\" className=\"shareIcon\" />\r\n              <span className=\"shareOptionText\" >Tag</span>\r\n\r\n            </div>\r\n\r\n            <div>\r\n              {openModalMap ? modalMap : null}\r\n              <div className=\"shareOption\" onClick={() => { setOpenModalMap(true) }}>\r\n                <Room htmlColor=\"green\" className=\"shareIcon\" />\r\n                <span className=\"shareOptionText\" >Location</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <button className=\"shareBotton\" type=\"submit\"> Share </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  )\r\n}","import { useContext, useEffect, useState, useRef } from \"react\"\r\nimport Post from \"../post/Post\"\r\nimport Share from \"../share/Share\"\r\nimport \"./feed.css\"\r\nimport axios from \"axios\"\r\nimport { AuthContext } from \"../../context/AuthContext\"\r\nimport { Search } from \"@mui/icons-material\";\r\nimport DevicesIcon from '@mui/icons-material/Devices';\r\nimport CheckroomIcon from '@mui/icons-material/Checkroom';\r\nimport WeekendIcon from '@mui/icons-material/Weekend';\r\nimport MedicalServicesIcon from '@mui/icons-material/MedicalServices';\r\nimport LocalLibraryIcon from '@mui/icons-material/LocalLibrary';\r\nimport OtherHousesIcon from '@mui/icons-material/OtherHouses';\r\n\r\nexport default function Feed({ username }) {\r\n    const [posts, setPost] = useState([]);\r\n    const { user } = useContext(AuthContext)\r\n    const search = useRef();\r\n    const [searchInput, setSearchInput] = useState(\"\");\r\n    const [filterInput, setFilterInput] = useState(\"\");\r\n\r\n\r\n    //const fetchSearch = async () => {\r\n    //     try {\r\n    //       const resSearch = await axios.get(\"/posts/feeds/search/\" + searchInput);\r\n    //       console.log(\"success\");\r\n    //       console.log(resSearch);\r\n    //     } catch (err) {\r\n    //       console.log(err);\r\n    //     }\r\n    //   };\r\n    // }\r\n    const handleSearch = async () => {\r\n        // setSearchInput(document.getElementById(\"searchInput\").value);\r\n        setSearchInput(search.current.value);\r\n        try {\r\n            const resSearch = await axios.get(process.env.REACT_APP_BACKEND_URL + \"/posts/feeds/search/\" + searchInput);\r\n            console.log(\"success\");\r\n            console.log(resSearch);\r\n            //   setPost(\r\n            //     resSearch.data.sort((p1, p2) => {\r\n            //       console.log(\"sort2\");\r\n            //       return new Date(p2.createdAt) - new Date(p1.createdAt);\r\n            //     })\r\n            //   );\r\n            setPost(resSearch.data);\r\n        } catch (err) {\r\n            console.log(err);\r\n        }\r\n    };\r\n    // fetchSearch();\r\n    const handleFilter = async () => {\r\n        // setSearchInput(document.getElementById(\"searchInput\").value);\r\n        let APPLIANCES = document.getElementById(\"1\");\r\n        let CLOTHES = document.getElementById(\"2\");\r\n        let FURNITURES = document.getElementById(\"3\");\r\n        let MEDICAL = document.getElementById(\"4\");\r\n        let STUDY = document.getElementById(\"5\");\r\n        let OTHERS = document.getElementById(\"6\");\r\n        if (APPLIANCES.checked === true) {\r\n            setFilterInput(\"APPLIANCES\");\r\n        } if (CLOTHES.checked === true) {\r\n            setFilterInput(\"CLOTHES\");\r\n        } if (FURNITURES.checked === true) {\r\n            setFilterInput(\"FURNITURES\");\r\n        } if (STUDY.checked === true) {\r\n            setFilterInput(\"STUDY\");\r\n        } if (MEDICAL.checked === true) {\r\n            setFilterInput(\"MEDICAL\");\r\n        } if (OTHERS.checked === true) {\r\n            setFilterInput(\"OTHERS\");\r\n        }\r\n        console.log(filterInput);\r\n        try {\r\n            const resSearch = await axios.get(process.env.REACT_APP_BACKEND_URL + \"/posts/feeds/tag/\" + filterInput);\r\n            console.log(\"filterInput\");\r\n            console.log(filterInput);\r\n            //   setPost(\r\n            //     resSearch.data.sort((p1, p2) => {\r\n            //       console.log(\"sort2\");\r\n            //       return new Date(p2.createdAt) - new Date(p1.createdAt);\r\n            //     })\r\n            //   );\r\n            setPost(resSearch.data);\r\n        } catch (err) {\r\n            console.log(err);\r\n        }\r\n    };\r\n\r\n\r\n    useEffect(() => {\r\n        const fetchPosts = async () => {\r\n            const res = username\r\n                ? await axios.get(process.env.REACT_APP_BACKEND_URL + \"/posts/profile/\" + username)\r\n                : await axios.get(process.env.REACT_APP_BACKEND_URL + \"/posts/timeline/\" + user._id)\r\n            setPost(res.data.sort((p1, p2) => {\r\n                return new Date(p2.createdAt) - new Date(p1.createdAt);\r\n                console.log(res.data)\r\n            })\r\n            )\r\n            // setPost(res.data);\r\n        }\r\n        fetchPosts()\r\n    }, [username, user._id])\r\n\r\n\r\n    return (\r\n\r\n\r\n        <div className=\"feed\">\r\n            <div className=\"sidebar\">\r\n            <ul className=\"searchbytags\">Search by Tags</ul>\r\n                <br></br>\r\n                <hr></hr>\r\n                <br></br>\r\n                <div className=\"sidebarList\" onClick={handleFilter}>\r\n                     <ul >\r\n                        <li className=\"sidebarListItem\" >\r\n                            <DevicesIcon className=\"sidebarIcon\"></DevicesIcon>\r\n                            <input type=\"radio\" name=\"tag\" value=\"APPLIANCES\" id=\"1\" />\r\n                            <span className=\"sidebarlistItemText\"> APPLIANCES</span>\r\n                        </li>\r\n                        <br></br>\r\n                        <li className=\"sidebarListItem\" >\r\n                            <CheckroomIcon className=\"sidebarIcon\"></CheckroomIcon>\r\n                            <input type=\"radio\" name=\"tag\" value=\"CLOTHES\" id=\"2\" />\r\n                            <span className=\"sidebarlistItemText\"> CLOTHES</span>\r\n                        </li>\r\n                        <br></br>\r\n                        <li className=\"sidebarListItem\">\r\n                            <WeekendIcon className=\"sidebarIcon\"> </WeekendIcon>\r\n                            <input type=\"radio\" name=\"tag\" value=\"FURNITURES\" id=\"3\" />\r\n                            <span className=\"sidebarlistItemText\"> FURNITURES</span>\r\n                        </li>\r\n                        <br></br>\r\n                        <li className=\"sidebarListItem\">\r\n                            <MedicalServicesIcon className=\"sidebarIcon\" ></MedicalServicesIcon>\r\n                            <input type=\"radio\" name=\"tag\" value=\"MEDICAL\" id=\"4\" />\r\n                            <span className=\"sidebarlistItemText\"> MEDICAL</span>\r\n                        </li>\r\n                        <br></br>\r\n                        <li className=\"sidebarListItem\">\r\n                            <LocalLibraryIcon className=\"sidebarIcon\"></LocalLibraryIcon>\r\n                            <input type=\"radio\" name=\"tag\" value=\"STUDY\" id=\"5\" />\r\n                            <span className=\"sidebarlistItemText\"> STUDY</span>\r\n                        </li>\r\n                        <br></br>\r\n                        <li className=\"sidebarListItem\" >\r\n                            <OtherHousesIcon className=\"sidebarIcon\" ></OtherHousesIcon>\r\n                            <input type=\"radio\" name=\"tag\" value=\"OTHERS\" id=\"6\" />\r\n                            <span className=\"sidebarlistItemText\"> OTHERS</span>\r\n                        </li>\r\n                    </ul>\r\n                    <br></br><br></br>\r\n                    <hr></hr> \r\n                </div>\r\n            </div>\r\n            {/* <div className=\"timeline\"> */}\r\n                {/* <div className=\"topWrapper\"> */}\r\n                {/* </div> */}\r\n                <div className=\"feedWrapper\">\r\n                    <div className=\"searchbar\">\r\n                        <Search style={{cursor:\"pointer\"}}className=\"searchIcon\" onClick={handleSearch}/>\r\n                        <input placeholder=\" Search !\" className=\"searchInput\" ref={search} style={{ backgroundColor: \"rgb(202, 196, 196)\" }} />\r\n                        {/* <Button variant=\"text\" className=\"searchInput\" onClick={handleSearch} >\r\n                            submit\r\n                        </Button> */}\r\n                    </div>\r\n                    {(!username || username === user.username) && <Share></Share>}\r\n                    {posts.map((p) => (\r\n                        <Post key={p._id} post={p} />\r\n                    ))}\r\n                </div>\r\n            {/* </div> */}\r\n        </div>\r\n    )\r\n}\r\n","import Topbar from \"../../components/topbar/Topbar\"\r\n// import Sidebar from \"../../components/sidebar/Sidebar\"\r\n// import Rightbar from \"../../components/rightbar/Rightbar\"\r\nimport Feed from \"../../components/feed/Feed\"\r\nimport \"./home.css\"\r\n\r\nexport default function Home() {\r\n    return(\r\n        <>\r\n        <Topbar />\r\n        {/* <div className=\"homeContainer\"> */}\r\n            <Feed />\r\n        {/* </div> */}\r\n        </>\r\n    )\r\n}\r\n","import { useContext, useRef} from \"react\";\r\nimport { loginCall } from \"../../apiCalls\";\r\nimport { AuthContext } from \"../../context/AuthContext\";\r\nimport \"./login.css\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport default function Login() {\r\n  const email = useRef();\r\n  const password = useRef();\r\n  const { isFetching, dispatch, error } = useContext(AuthContext);\r\n  const handleClick = (e) => {\r\n    e.preventDefault();\r\n     if (error) {\r\n       alert(\"Wrong password\");\r\n       console.log(error)\r\n     } else {\r\n      loginCall(\r\n        { email: email.current.value, password: password.current.value },\r\n        dispatch\r\n      );\r\n     }\r\n  };\r\n\r\n\r\n  return (\r\n    <div className=\"login\">\r\n      <div className=\"loginWrapper\">\r\n        <div className=\"loginLeft\">\r\n          <h3 className=\"loginLogo\">FFL</h3>\r\n          <span className=\"loginDesc\">DONATION</span>\r\n        </div>\r\n        <div className=\"loginRight\">\r\n          <form className=\"loginBox\" onSubmit={handleClick}>\r\n            <input\r\n              placeholder=\"Email\"\r\n              type=\"email\"\r\n              required\r\n              className=\"loginInput\"\r\n              ref={email}\r\n            />\r\n            <input\r\n              placeholder=\"password\"\r\n              type=\"password\"\r\n              minLength=\"6\"\r\n              required\r\n              className=\"loginInput\"\r\n              ref={password}\r\n            />\r\n            <button className=\"loginButton\">\r\n              {isFetching ? \"loading\" : \"Login\"}\r\n            </button>\r\n\r\n            <Link to=\"/register\">\r\n              <button className=\"loginRegisterButton\">\r\n                Create your Account\r\n              </button>\r\n            </Link>\r\n            <span className=\"forgot\">Forgot password?</span>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import \"./profile.css\"\r\nimport Topbar from \"../../components/topbar/Topbar\"\r\nimport Feed from \"../../components/feed/Feed\"\r\nimport { useEffect, useState } from \"react\"\r\nimport axios from \"axios\"\r\nimport { useParams } from \"react-router\"\r\n\r\nexport default function Profile() {\r\n    const PF = process.env.REACT_APP_PUBLIC_FOLDER\r\n    const [user, setUser]= useState({})\r\n    const username = useParams().username\r\n\r\n    useEffect(()=>{\r\n        const fetchUser = async () =>{\r\n            const res = await axios.get(process.env.REACT_APP_BACKEND_URL + `/users?username=${username}`)\r\n            setUser(res.data)\r\n        }\r\n        fetchUser()\r\n    },[username])\r\n\r\n    return (\r\n        <>\r\n        <Topbar/>\r\n        <div className=\"profile\">\r\n            <div className=\"profileRight\">\r\n            {/* <div className=\"profileRightTop\">\r\n            <div className=\"profileCover\">\r\n                <img className=\"profileUserImg\"src={user.profilePicture ? PF+user.profilePicture : PF+\"person.png\"} alt=\"\" />\r\n            </div>\r\n            <div className=\"profileInfo\">\r\n                <h4 className=\"profileInfoName\">{user.username}</h4>\r\n                <button>change name</button>\r\n            </div>\r\n            </div> */}\r\n            <div className=\"profileRightBottom\">\r\n            <Feed username={username}/>\r\n            </div>\r\n            </div>\r\n        </div>\r\n        </>\r\n    )\r\n}\r\n","import { useRef } from \"react\";\r\nimport { useHistory } from \"react-router\";\r\nimport \"./register.css\";\r\nimport axios from \"axios\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport default function Register() {\r\n  const username = useRef();\r\n  const email = useRef();\r\n  const password = useRef();\r\n  const passwordAgain = useRef();\r\n  const history = useHistory();\r\n  const handleClick = async (e) => {\r\n    e.preventDefault();\r\n    if (\r\n      username.current.value.trim() == null ||\r\n      username.current.value.trim() === \"\"\r\n    ) {\r\n      username.current.setCustomValidity(\"Do not have space\");\r\n      console.log(\"error\");\r\n    } else if (passwordAgain.current.value !== password.current.value) {\r\n      passwordAgain.current.setCustomValidity(\"Passwords don't match!\");\r\n    } else {\r\n      const user = {\r\n        username: username.current.value,\r\n        email: email.current.value,\r\n        password: password.current.value,\r\n      };\r\n      try {\r\n        await axios.post(process.env.REACT_APP_BACKEND_URL + \"/auth/register\", user).then((res) => {\r\n          console.log(res);\r\n        });\r\n        history.push(\"/login\");\r\n      } catch (err) {\r\n        console.log(err.message);\r\n        email.current.setCustomValidity(err.message);\r\n      }\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"login\">\r\n      <div className=\"loginWrapper\">\r\n        <div className=\"loginLeft\">\r\n          <h3 className=\"loginLogo\">FFL</h3>\r\n          <span className=\"loginDesc\">DONATION</span>\r\n        </div>\r\n        <div className=\"loginRight\">\r\n          <form className=\"registerBox\" onSubmit={handleClick}>\r\n            <input\r\n              placeholder=\"Username\"\r\n              required\r\n              ref={username}\r\n              className=\"registerInput\"\r\n            />\r\n            <input\r\n              placeholder=\"Email\"\r\n              required\r\n              ref={email}\r\n              type=\"email\"\r\n              className=\"registerInput\"\r\n            />\r\n            <input\r\n              placeholder=\"Password\"\r\n              required\r\n              ref={password}\r\n              minLength=\"6\"\r\n              type=\"password\"\r\n              className=\"registerInput\"\r\n            />\r\n            <input\r\n              placeholder=\"Comfirm Password\"\r\n              required\r\n              ref={passwordAgain}\r\n              minLength=\"6\"\r\n              type=\"password\"\r\n              className=\"registerInput\"\r\n            />\r\n            <button className=\"submitSignUp\" type=\"submit\">\r\n              Sign up\r\n            </button>\r\n            <Link to=\"/login\">\r\n              <button className=\"loginRegisterButton\">Back to Login</button>\r\n            </Link>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useState, useEffect } from \"react\"\r\nimport \"./conversation.css\"\r\nimport axios from \"axios\"\r\n\r\nexport default function Conversation({conversation, currentUser}) {\r\n    const [user, setUser] = useState(null)\r\n    const PF = process.env.REACT_APP_PUBLIC_FOLDER\r\n\r\n    useEffect(() => {\r\n        const friendId = conversation.members.find((m) => m !== currentUser._id);\r\n\r\n        const getUser = async () => {\r\n            try {\r\n                const res = await axios(process.env.REACT_APP_BACKEND_URL + \"/users?userId=\" + friendId);\r\n                setUser(res.data) ;\r\n                console.log(res) ;\r\n            } catch(err) {\r\n                console.log(err) ;\r\n            }\r\n        };\r\n        getUser() ;\r\n    }, [currentUser, conversation]);\r\n\r\n    return(\r\n        <div className=\"conversation\">\r\n             <img className=\"conversationImg\" src=\r\n             {user?.profilePicture ? PF + user.profilePicture : PF +\"person.png\"} \r\n             alt=\"\" />\r\n            <span className=\"conversationName\">\r\n            {user?.username}\r\n            </span>\r\n        </div>\r\n    )\r\n}","import \"./message.css\"\r\nimport {format} from \"timeago.js\"\r\n\r\nconst PF = process.env.REACT_APP_PUBLIC_FOLDER\r\n\r\nexport default function Message({message, own}) {\r\n    return(\r\n        <div className={own ? \"message own\" : \"message\"}>\r\n            <div className=\"messageTop\">\r\n                <img className=\"messageImg\" src={PF+\"person.png\"} alt=\"\" />\r\n                <p className=\"messageText\">{message.text}</p>\r\n            </div>\r\n            <div className=\"messageBottom\">\r\n                {format(message.createdAt)}\r\n            </div>\r\n        </div>\r\n    )\r\n}","import \"./chatOnline.css\"\r\nimport { useState, useEffect } from \"react\" ;\r\nimport axios from \"axios\";\r\n\r\nexport default function ChatOnline({onlineUsers, currentId, setCurrentChat}) {\r\n    const [friends, setFriends] = useState([]);\r\n    const [onlineFriends, setOnlineFriends] = useState([]);\r\n    const PF = process.env.REACT_APP_PUBLIC_FOLDER ;\r\n\r\n    useEffect(() => {\r\n        const getFriends = async () => {\r\n            const res = await axios.get(process.env.REACT_APP_BACKEND_URL + \"/users/friend\" + currentId)\r\n            setFriends(res.data);\r\n        };\r\n        getFriends();\r\n    }, [currentId]);\r\n\r\n    useEffect(() => {\r\n        setOnlineFriends(friends.filter((f) => onlineUsers.includes(f._id)));\r\n    }, [friends, onlineUsers]);\r\n\r\n    const handleClick = async (user) => {\r\n        try { \r\n            const res = await axios.get(process.env.REACT_APP_BACKEND_URL + `/users/find/${currentId}/${user._id}` );\r\n            setCurrentChat(res.data);\r\n        } catch (err) {\r\n            console.log(err);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"chatOnline\">\r\n            {onlineFriends.map((o) => (\r\n            <div className=\"chatOnlineFriend\" onClick={() => handleClick(o)}>\r\n                <div className=\"chatOnlineImgContainer\">\r\n                     <img className=\"chatOnlineImg\" \r\n                     src={o?.profilePicture ? PF + o.profilePicture: \"blank-profile-picture.png\" } \r\n                     alt=\"\" />\r\n                <div className=\"chatOnlineBadge\"></div>\r\n            </div>\r\n                <span className=\"chatOnlineName\">{o?.username}</span>\r\n            </div>\r\n            ))}\r\n        </div>\r\n    )\r\n}\r\n","import \"./messenger.css\" ;\r\nimport Topbar from \"../../components/topbar/Topbar\";\r\nimport Conversation from \"../../components/conversations/Conversation\" ;\r\nimport Message from \"../../components/message/Message\" ;\r\nimport ChatOnline from \"../../components/chatOnline/ChatOnline\" ;\r\nimport { useContext, useState, useEffect, useRef} from \"react\" ;\r\nimport { AuthContext } from \"../../context/AuthContext\" ;\r\nimport axios from \"axios\";\r\nimport { io } from \"socket.io-client\"\r\n\r\nexport default function Messenger() {\r\n    const [conversations, setConversations] = useState([]);\r\n    const [currentChat, setCurrentChat] = useState(null);\r\n    const [messages, setMessages] = useState([]);\r\n    const [newMessage, setNewMessage] = useState(\"\");\r\n    const [arrivalMessage, setArrivalMessage] = useState(null);\r\n    const [onlineUsers, setOnlineUsers] = useState([]);\r\n    const socket = useRef();\r\n    const {user} = useContext(AuthContext);\r\n    const scrollRef = useRef();\r\n\r\n    useEffect(() => {\r\n        socket.current = io(\"ws://localhost:8900\");\r\n        socket.current.on(\"getMessage\", (data) => {\r\n            setArrivalMessage({\r\n                sender: data.senderId,\r\n                text: data.text,\r\n                createdAt: Date.now(),\r\n            });\r\n        });\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        arrivalMessage &&\r\n            currentChat?.members.includes(arrivalMessage.sender) &&\r\n            setMessages((prev) => [...prev, arrivalMessage]);\r\n    }, [arrivalMessage, currentChat]);\r\n\r\n    useEffect(() => {\r\n        socket.current.emit(\"addUser\", user._id);\r\n        socket.current.on(\"getUsers\", (users) => {\r\n            setOnlineUsers(\r\n                user.followings.filter((f) => users.some((u) => u.userId === f))\r\n            );\r\n        });\r\n    }, [user]);\r\n\r\n    useEffect(() => {\r\n        const getConversations = async() => {\r\n            try {\r\n                const res = await axios.get(process.env.REACT_APP_BACKEND_URL + \"/conversations/\"+ user._id)\r\n                setConversations(res.data) ;\r\n                console.log(res)\r\n            } catch(err) {\r\n                console.log(err) ;\r\n            }\r\n        };\r\n        getConversations() ;\r\n    }, [user._id]);\r\n\r\n    useEffect(() => {\r\n        const getMessages = async () => {\r\n            try{\r\n                const res = await axios.get(process.env.REACT_APP_BACKEND_URL + \"/messages/\" + currentChat?._id) ;\r\n                setMessages(res.data) ;\r\n            } catch(err) {}\r\n        };\r\n        getMessages() ;\r\n    }, [currentChat]) ;\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault() ;\r\n        const message = {\r\n            sender: user._id,\r\n            text: newMessage, \r\n            conversationId: currentChat._id\r\n        };\r\n        \r\n        const receiverId = currentChat.members.find(\r\n            (member) => member !== user._id\r\n        );\r\n\r\n        socket.current.emit(\"sendMessage\", {\r\n            senderId: user.id,\r\n            receiverId,\r\n            text: newMessage,\r\n        });\r\n\r\n        try{\r\n            const res = await axios.post(process.env.REACT_APP_BACKEND_URL + \"/messages\", message) ;\r\n            setMessages([...messages, res.data]) ;\r\n            setNewMessage(\"\") ;\r\n        } catch(err) {\r\n            console.log(err)\r\n        }\r\n    };\r\n\r\n    // useEffect(() => {\r\n    //     scrollRef.current.scrollIntoView({behavior: \"smooth\"}) ;\r\n    // }, [messages]);\r\n\r\n    return(\r\n        <>\r\n            <Topbar/>\r\n            <div className=\"messenger\">\r\n                <div className=\"chatMenu\">\r\n                    <div className=\"chatMenuWrapper\">\r\n                        <input placeholder=\"Search Users\" className=\"chatMenuInput\" />\r\n                        {conversations.map((c) => (\r\n                            <div className=\"\" onClick={() => setCurrentChat(c)}>\r\n                            <Conversation conversation={c} currentUser = {user}/>\r\n                            </div>\r\n                        ))}            \r\n                    </div>\r\n                </div>\r\n                <div className=\"chatBox\">\r\n                    <div className=\"chatBoxWrapper\">\r\n                        {\r\n                            currentChat ?\r\n                        (<>\r\n                        <div className=\"chatBoxTop\">\r\n                            {messages.map((m) => (\r\n                                <div ref={scrollRef}>\r\n                                    <Message message = {m} own={m.sender === user._id} />\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                        <div className=\"chatBoxBottom\">\r\n                            <textarea className=\"chatMessageInput\" placeholder=\"Write something here\" \r\n                            onChange = {(e) => setNewMessage(e.target.value)} value={newMessage} />\r\n                            <button className=\"chatSubmitButton\" onClick={handleSubmit}>Send</button>\r\n                        </div>\r\n                        </>) : (<span className=\"noConversationText\"> Open Conversation to Start Chat</span>) }\r\n                    </div>\r\n                </div>\r\n                <div className=\"chatOnline\">\r\n                    <div className=\"chatOnlineWrapper\">\r\n                        <ChatOnline \r\n                        onlineUsers = {onlineUsers} \r\n                        currentId = {user._id} \r\n                        setCurrentChat = {setCurrentChat} \r\n                        />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\n\r\n","import axios from \"axios\"\r\nimport { React, useEffect, useState } from \"react\"\r\nimport { useParams } from \"react-router\"\r\nimport Post from \"../../components/post/Post\";\r\n\r\nexport default function Comments() {\r\n    const postid = useParams();\r\n    const [posts, setPost] = useState({});\r\n    const [loading, setLoading] = useState(true);\r\n \r\n    useEffect(() => {\r\n\r\n        axios.get(process.env.REACT_APP_BACKEND_URL + \"/posts/\" + postid)\r\n            .then(res => {\r\n                setPost(res.data);\r\n            })\r\n\r\n                const fetchData = async () => {\r\n                    setLoading(true);\r\n                    try {\r\n                        axios.get(process.env.REACT_APP_BACKEND_URL + `/comments/post/` + postid)\r\n                            .then(res => {\r\n                                \r\n                            })\r\n                    } catch (error) {\r\n\r\n                    }\r\n                    setTimeout(() => { setLoading(false); }, 100)\r\n                }\r\n\r\n                fetchData()\r\n\r\n            }, [])\r\n\r\n        return (\r\n            <div>\r\n                <Post post={posts} />\r\n            </div>\r\n        )\r\n\r\n    }","import Home from \"./pages/home/Home\";\r\nimport Login from \"./pages/login/Login\";\r\nimport Profile from \"./pages/profile/Profile\";\r\nimport Register from \"./pages/register/Register\";\r\nimport Messenger from \"./pages/messenger/Messenger\";\r\n\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Redirect\r\n} from \"react-router-dom\";\r\nimport { useContext } from \"react\";\r\nimport { AuthContext } from \"./context/AuthContext\";\r\nimport Comments from \"./pages/comment/Comments\";\r\n\r\nfunction App() {\r\n  const { user } = useContext(AuthContext);\r\n  return (\r\n    <Router>\r\n      <Switch>\r\n        <Route exact path=\"/\">\r\n          {user ? <Home /> : <Register />}\r\n        </Route>\r\n        <Route path=\"/login\">{user ? <Redirect to=\"/\" /> : <Login user={user} />}</Route>\r\n        <Route path=\"/register\">\r\n          {user ? <Redirect to=\"/\" /> : <Register />}\r\n        </Route>\r\n        <Route path=\"/messenger\">\r\n          {!user ? <Redirect to=\"/\" /> : <Messenger />}\r\n        </Route>\r\n        <Route path=\"/profile/:username\">\r\n          <Profile />\r\n        </Route>\r\n        <Route path=\"/comments/:postid\">\r\n          <Comments />\r\n        </Route>\r\n      </Switch>\r\n    </Router>\r\n  );\r\n}\r\n\r\n\r\nexport default App;\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport { AuthContextProvider } from \"./context/AuthContext\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <AuthContextProvider>\n      <App />\n    </AuthContextProvider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);"],"sourceRoot":""}